$(function(){var e=$("body");var t=$("#flash");var n;if(t.is(":visible")){t.setRemoveTimeout(6e3)}var r=new Gettext({domain:"messages"});$(".printTrigger").on("click",function(e){e.preventDefault();window.print()});var i="";$(document).on("mouseenter",'img[class*="hoverable"]',function(){var e=$(this).attr("src");i=e;var t=getImageDetails(e);$(this).attr("src",baseUrl+"/images/"+t[0]+"-hover."+t[1])}).on("mouseleave",'img[class*="hoverable"]',function(){$(this).attr("src",i);i=""});$(document).on("click",function(e){if(e.target.id=="shadow"){n.unfocusLight();$("body").removeClass("unscrollable");n.detach()}});$("#generatedVideos").children("li").children(".button").on("click",function(){var e=$(this);$.ajax({url:baseUrl+"/admin/tutorials/save",type:"POST",data:{player:e.siblings("input[name='player']").val(),champion:e.siblings("input[name='champion']").val(),opponent:e.siblings("input[name='opponent']").val(),position:e.siblings("input[name='position']").val(),videoId:e.siblings("input[name='videoId']").val()}}).success(function(t){if(t.success==1){e.parent().detach()}addMessage(t.message)}).error(function(){addMessage(r.gettext("Something with wrong, please try again."))})});$("#announcement").find(".remove").on("click",function(){var e=$(this).parent();var t=e.attr("data-target");var n=jQuery.parseJSON(decodeURIComponent(readCookie("announcements")));n[t]=false;var r=encodeURIComponent(JSON.stringify(n));e.detach();createCookie("announcements",r,5)});if(!isMobile){$(".selectable").each(function(){var e=$(this);e.selectbox();if(e.hasClass("championSelect")){e.next(".sbHolder").find("ul li").each(function(){var e=$(this);var t=e.children("a").addClass("championName");var n=t.html();var r=$("<span />",{"class":"nameValue",html:n});t.html(r);var i=$("<img />",{src:baseUrl+"/images/champions/"+n+".png",alt:n+" thumbnail","class":"championThumbnail"}).attr("width",45).attr("height",40).prependTo(t)});var t=e.next(".sbHolder").css("width","263px");t.children(".sbSelector, .sbOptions").css("width","263px");t.after($('<img class="search hoverable" width="14" height="14" title="Search for a champion" src="'+baseUrl+'/images/search.png" />'))}})}$(".extraOptionsToggle").on("click",function(){var e=$(this);var t=$("#extraOptions");if(t.is(":visible")){t.slideUp();e.html("Click for additional options +")}else{t.slideDown();e.html("Click for additional options -")}});$(document).on("click","img.search",function(){var e=$(this);var t=e.siblings(".sbHolder");var n=e.siblings(".championSearch");if(t.is(":visible")){t.hide();if(n.length<=0){n=$("<input />",{"class":"championSearch",placeholder:"Type a champion's name..",css:{width:"263px",padding:"0"}}).insertBefore(e);n.on("keyUp",function(e){alert(e)});$("<ul />",{"class":"championResults"}).insertAfter(e)}else{n.show();e.siblings(".championResults").show()}}else{t.show();n.hide();e.siblings(".championResults").hide()}});$(document).on("click",".championResults li",function(){var e=$(this),t=e.parent(),n=t.siblings("select"),r=t.siblings("input"),i=e.children("a").attr("rel"),s=n.siblings(".sbHolder").show(),o=s.find(".sbOptions");var u=n.find("option[value="+i+"]");n.selectbox("change",u.attr("value"),u.html());o.find("a.sbActiveSelection").removeClass("sbActiveSelection");o.children("li").each(function(){var e=$(this).children("a");if(e.attr("rel")==i){e.addClass("sbActiveSelection")}});r.val("");r.hide();t.html("").hide();s.show()});$(document).on("click",".fb-share",function(){var e=$(this).attr("href");fbShare(e,650,400);event.preventDefault()});$(document).on("click",".twitter-share",function(){var e=$(this).attr("href");var t="popUp";var n="width=650,height=400,scrollbars=yes";window.open(e,t,n);event.preventDefault()});$("#tutorials").perfectScrollbar();var s=false;$(document).on("keyup",".championSearch",function(e){var t=$(this),n=t.val().trim().toLowerCase(),r=t.siblings(".sbHolder").find(".sbOptions"),i=t.siblings(".championResults");delay(function(){e.preventDefault();if(n.length<=0){i.html("")}else{var t="";r.find("li").each(function(){var e=$(this).find(".nameValue").html().toLowerCase();if(e.indexOf(n)>-1){t+=$(this).prop("outerHTML")}});i.html(t).show()}},150)});$("nav a").on("mouseenter",function(){var e=$(this);if(!e.hasClass("active")){e.siblings(".active").css("border-bottom","none");e.addClass("hovered")}}).on("mouseleave",function(){$("nav a.hovered").removeClass("hovered");$("nav a.active").css("border-bottom","7px solid #555")});$("#saveResults").on("click",function(e){e.preventDefault();html2canvas($("#searchResultBox"),{onrendered:function(e){var t=e.toDataURL("image/png");var n=encodeURIComponent(t);$.ajax({type:"POST",url:baseUrl+"/download",data:{image:t}}).success(function(e){if(e.name){window.location=baseUrl+"/download/"+e.name;$.ajax({type:"POST",url:baseUrl+"/download",data:{image:e.name,"delete":"delete"}})}else{addMessage("Something went wrong, please try again!")}})}})});$(document).on("click",".videoMask, #tutorials li a",function(t){if(!isMobile&&!$(this).hasClass("notInWindow")){t.preventDefault();t.stopPropagation();var r=$(this).parent();var i=r.closest("li");var s=i.attr("class").substr(9);var o=$("<div/>",{id:"stageWrapper"}).prependTo($("body"));var u=$("<div/>",{id:"stage"}).appendTo(o);var a=$("<div/>",{id:"videoWrapper"}).appendTo(u);var f=$("<iframe/>",{id:"youtubeVideo",frameborder:0,src:"http://www.youtube.com/embed/"+s+"?autoplay=1"}).appendTo(a);n=o;o.addClass("target-"+s).focusLight();e.addClass("unscrollable")}else{var l=$(this).siblings("a");window.location.href=l.attr("href")}})})