<div id="main">
    <?php
    $mainSuggestion = isset($results['mainSuggestion']) ? $results['mainSuggestion'] : '';
    if (is_array($mainSuggestion)):
        $mainSuggestion = array_shift($mainSuggestion);
        $name = $mainSuggestion->getName();
        $kda = $mainSuggestion->getKda();
        if ($kda >= 6) {
            $comment = "perfect";
        } else if ($kda >= 4.5) {
            $comment = "awesome";
        } else if ($kda >= 3) {
            $comment = "good";
        } else if ($kda >= 2) {
            $comment = "average";
        } else {
            $comment = "not good";
        }
        ?>
        <div class="increasedLineHeight">
            <p>Based on your input, we strongly advise you to play <strong><?php echo $name; ?></strong></p>
            <img src="<?php echo $this->basePath('images/champions/' . ucwords($name) . '.png'); ?>"/>
            <span class="score">LP SCORE: <?php echo $mainSuggestion->getScore(); ?></span>

            <p>
                <?php echo $name; ?> is considered to be a <strong>counter</strong> to the opponent you selected. <br/>
                In addition, he is one of your <strong>top 3 champions</strong> at the position the opponent is played.
                <br/>
                There might be other champions with higher LP score, but we suggest you try <?php echo $name; ?> first.
                <br/>
                With <?php echo $name; ?> you have a <strong><?php echo $mainSuggestion->getWinRatio(); ?>%</strong> win
                ratio. <br/>
                This means that out of the <strong><?php echo $mainSuggestion->getTotalGames(); ?></strong> games you
                have
                won <strong><?php echo $mainSuggestion->getGamesWon(); ?></strong>.<br/>
                Moreover, you have a KDA of <strong><?php echo $kda; ?></strong> which is <?php echo $comment; ?>.
            </p>
            <ul class="champions">
                <?php
                $counters = array();
                foreach ($mainSuggestion as $key => $champion):
                    $name = $champion->getName();
                    if ($key == "counter") $counters[] = $champion;
                    ?>
                    <li>
                        <a href="<?php echo $this->url('search', array('summoner' => $summoner, 'region' => $region, 'champion' => $name, 'position' => $params["position"], 'opponent' => $params["opponent"])); ?>"
                           title="Click to see your stats with <?php echo $name; ?>">
                            <img
                                src="<?php echo $this->basePath('images/champions/' . ucwords($name) . '.png'); ?>"/>
                            <span class="score">Score: <?php echo $champion->getScore(); ?></span>
                        </a>
                    </li>
                <?php endforeach; ?>
            </ul>
        </div>
        <?php if (count($results["secondarySuggestions"]) > 0): ?>
        <p>If you don't feel like playing any of those, you can try one of the following ones:</p>
        <ul class="champions">
            <?php foreach ($results["secondarySuggestions"] as $champion):
                $name = $champion->getName();
                ?>
                <li class="shadowed">
                    <a href="<?php echo $this->url('search', array('summoner' => $summoner, 'region' => $region, 'champion' => $name, 'position' => $params["position"], 'opponent' => $params["opponent"])); ?>"
                       title="Click to see your stats with <?php echo $name; ?>">
                        <img
                            src="<?php echo $this->basePath('images/champions/' . ucwords($name) . '.png'); ?>"/>
                        <span class="score">Score: <?php echo $champion->getScore(); ?></span>
                    </a>
                </li>
            <?php endforeach; ?>
        </ul>
    <?php endif; ?>
    <?php
    elseif (empty($mainSuggestion)):
        ?>
        <div class="increasedLineHeight">
            <p>Based on your input, we don't have a single champion to suggest.<br>
                However, you can try searching again with different parameters!</p>
        </div>
    <?php
    else:
        $name = $mainSuggestion->getName();
        $kda = $mainSuggestion->getKda();
        if ($kda >= 6) {
            $comment = "perfect";
        } else if ($kda >= 4.5) {
            $comment = "awesome";
        } else if ($kda >= 3) {
            $comment = "good";
        } else if ($kda >= 2) {
            $comment = "average";
        } else {
            $comment = "not good";
        }
        ?>
        <div class="increasedLineHeight">
            <p>Based on your input, we strongly advise you to play <strong><?php echo $name; ?></strong></p>
            <img src="<?php echo $this->basePath('images/champions/' . ucwords($name) . '.png'); ?>"/>
            <span class="score">LP SCORE: <?php echo $mainSuggestion->getScore(); ?></span>

            <p>With <?php echo $name; ?> you have a <strong><?php echo $mainSuggestion->getWinRatio(); ?>%</strong> win
                ratio. <br/>
                This means that out of the <strong><?php echo $mainSuggestion->getTotalGames(); ?></strong> games you
                have
                won <strong><?php echo $mainSuggestion->getGamesWon(); ?></strong>.<br/>
                Moreover, you have a KDA of <strong><?php echo $kda; ?></strong> which is <?php echo $comment; ?>.
            </p>
        </div>
        <?php if (count($results["secondarySuggestions"]) > 0): ?>
        <p>If you feel like playing something else, you can try one of the following champion(s):</p>
        <ul class="champions">
            <?php foreach ($results["secondarySuggestions"] as $champion):
                $name = $champion->getName();
                ?>
                <li class="shadowed">
                    <a href="<?php echo $this->url('search', array('summoner' => $summoner, 'region' => $region, 'champion' => $name, 'position' => $params["position"])); ?>"
                       title="Click to see your stats with <?php echo $name; ?>">
                        <img
                            src="<?php echo $this->basePath('images/champions/' . ucwords($name) . '.png'); ?>"/>
                        <span class="score">Score: <?php echo $champion->getScore(); ?></span>
                    </a>
                </li>
            <?php endforeach; ?>
        </ul>
    <?php endif; ?>
    <?php
    endif;
    ?>
    <a href="<?php echo $this->url("home"); ?>" class="redirect">Search Again?</a>
</div>